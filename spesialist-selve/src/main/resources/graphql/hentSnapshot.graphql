fragment detailedDag on GraphQLDag {
    begrunnelser,
    dato,
    grad,
    kilde {
        id,
        type
    },
    sykdomsdagtype,
    utbetalingsdagtype,
    utbetalingsinfo {
        arbeidsgiverbelop,
        inntekt,
        personbelop,
        refusjonsbelop,
        totalGrad,
        utbetaling
    }
}

fragment detailedUberegnetPeriode on GraphQLUberegnetPeriode {
    behandlingstype,
    erForkastet,
    fom,
    inntektstype,
    opprettet,
    periodetype,
    tidslinje {
        ...detailedDag
    },
    tom
}

fragment detailedPeriode on GraphQLBeregnetPeriode {
    aktivitetslogg {
        alvorlighetsgrad,
        melding,
        tidsstempel,
        vedtaksperiodeId
    },
    behandlingstype,
    beregningId,
    erForkastet,
    fom,
    forbrukteSykedager,
    gjenstaendeSykedager,
    hendelser {
        ... on GraphQLInntektsmelding {
            beregnetInntekt,
            id,
            mottattDato,
            type
        },
        ... on GraphQLSoknadArbeidsgiver {
            fom,
            id,
            rapportertDato,
            sendtArbeidsgiver,
            tom,
            type
        },
        ... on GraphQLSoknadNav {
            fom,
            id,
            rapportertDato,
            sendtNav,
            tom,
            type
        },
        ... on GraphQLSykmelding {
            fom,
            id,
            rapportertDato,
            tom,
            type
        }
    },
    inntektstype,
    maksdato,
    opprettet,
    periodetype,
    periodevilkar {
        alder {
            alderSisteSykedag,
            oppfylt
        },
        soknadsfrist {
            oppfylt,
            sendtNav,
            soknadFom,
            soknadTom
        },
        sykepengedager {
            forbrukteSykedager,
            gjenstaendeSykedager,
            maksdato,
            oppfylt,
            skjaeringstidspunkt
        }
    }
    simulering {
        perioder {
            fom,
            tom,
            utbetalinger {
                detaljer {
                    antallSats,
                    belop,
                    faktiskFom,
                    faktiskTom,
                    klassekode,
                    klassekodeBeskrivelse,
                    konto,
                    refunderesOrgNr,
                    sats,
                    tilbakeforing,
                    typeSats,
                    uforegrad,
                    utbetalingstype
                },
                feilkonto,
                forfall,
                utbetalesTilId,
                utbetalesTilNavn
            }
        },
        totalbelop
    }
    skjaeringstidspunkt,
    tidslinje {
        ...detailedDag
    },
    tom,
    utbetaling {
        arbeidsgiverFagsystemId,
        arbeidsgiverNettoBelop,
        personFagsystemId,
        personNettoBelop,
        status,
        type,
        vurdering {
            automatisk,
            godkjent,
            ident,
            tidsstempel
        }
    },
    vilkarsgrunnlaghistorikkId
}

fragment grunnlag on GraphQLVilkarsgrunnlag {
    inntekter {
        arbeidsgiver,
        omregnetArsinntekt {
            belop,
            inntekterFraAOrdningen {
                maned,
                sum
            },
            kilde,
            manedsbelop
        },
        sammenligningsgrunnlag {
            belop,
            inntekterFraAOrdningen {
                maned,
                sum
            }
        }
    },
    omregnetArsinntekt,
    sammenligningsgrunnlag,
    skjaeringstidspunkt,
    sykepengegrunnlag
}

query HentSnapshot($fnr: String!) {
    person(fnr: $fnr) {
        aktorId,
        arbeidsgivere {
            generasjoner {
                id,
                perioder {
                    ... on GraphQLBeregnetPeriode {
                        __typename,
                        id,
                        ...detailedPeriode
                    }
                    ... on GraphQLUberegnetPeriode {
                        __typename,
                        id,
                        ...detailedUberegnetPeriode
                    }
                }
            }
        },
        dodsdato,
        fodselsnummer,
        inntektsgrunnlag {
            avviksprosent,
            grunnbelop,
            inntekter {
                arbeidsgiver,
                omregnetArsinntekt {
                    belop,
                    inntekterFraAOrdningen {
                        maned,
                        sum
                    },
                    kilde,
                    manedsbelop
                },
                sammenligningsgrunnlag {
                    belop,
                    inntekterFraAOrdningen {
                        maned,
                        sum
                    }
                }
            },
            maksUtbetalingPerDag,
            omregnetArsinntekt,
            oppfyllerKravOmMinstelonn,
            sammenligningsgrunnlag,
            skjaeringstidspunkt,
            sykepengegrunnlag
        },
        versjon,
        vilkarsgrunnlaghistorikk {
            id,
            grunnlag {
                ... on GraphQLInfotrygdVilkarsgrunnlag {
                    __typename,
                    vilkarsgrunnlagtype,
                    ...grunnlag,
                },
                ... on GraphQLSpleisVilkarsgrunnlag {
                    __typename,
                    vilkarsgrunnlagtype,
                    antallOpptjeningsdagerErMinst,
                    avviksprosent,
                    grunnbelop,
                    oppfyllerKravOmMedlemskap,
                    oppfyllerKravOmMinstelonn,
                    oppfyllerKravOmOpptjening,
                    opptjeningFra,
                    ...grunnlag
                }
            }
        }
    }
}
